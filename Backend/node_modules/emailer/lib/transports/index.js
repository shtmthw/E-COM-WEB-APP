var fs = require("fs"),
path = require("path");


var transports = {};

fs.readdirSync(__dirname).filter(function(file) {
	return file != ".DS_Store" && file != "index.js";
}).
forEach(function(file) {
	transports[file.split(".").shift()] = require("./" + file);
});


exports.getTransport = function(options) {
	var target = Object.keys(options).shift(), clazz;
	if(!target) throw new Error("transport is not present");
	if(!(clazz = exports.getTransportClass(target))) throw new Error("transport does not exist");

	return new clazz(options[target]);
}

exports.getTransportClass = function(name) {
	return transports[name];
}